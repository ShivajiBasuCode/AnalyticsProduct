var admin={init:function(n,t,i){var r=n,u=t,f=i;return r+u+f}},admin_clientmanagement={controllerurl:"admin/ClientManagement/",initlistpage:function(){$(document).ready(()=>{admin_clientmanagement.List(),admin_clientmanagement.FillSearchParameters()})},initaddpage:function(){$(document).ready(()=>{commonFunctions.createDatePicker(),commonFunctions.createTimePicker(),admin_clientmanagement.FillDropdown(),admin_clientmanagement.FillMultiselect()})},getSearchCriteria:function(){return{Field:$("#Field").val(),Query:$("#Query").val(),IncludeInactive:$("#IncludeInactive").is(":checked")?!0:!1,IncludeDeleted:$("#IncludeDeleted").is(":checked")?!0:!1}},FillDropdown:function(){let n=$("#DropDownCol").attr("data-selectedvalue");fillcombo.DropdownData(n).then(n=>{commonFunctions.fillCombo("DropDownCol",n)})},FillMultiselect:function(){let n=$("#MultiSelect").attr("data-selectedvalue");fillcombo.DropdownData(n).then(n=>{commonFunctions.fillCombo("MultiSelect",n,!0)})},FillSearchParameters:function(){fillcombo.SearchParameterData({Table:"ClientInformation"}).then(n=>{commonFunctions.fillCombo("Field",n,!1)})},List:function(){commonFunctions.clearDatatable("dtclientlist");let n=admin_clientmanagement.getSearchCriteria();apiCall.ajaxCallWithReturnData(n,"POST",admin_clientmanagement.controllerurl+"List").then(n=>{admin_clientmanagement.onsuccess_List(n.Data)})},onsuccess_List:function(n){var t=$("#dtclientlist").DataTable({bServerSide:!1,bDestroy:!0,paging:!0,autoWidth:!1,bStateSave:!1,searching:!1,data:n,info:!1,aaSorting:[],language:{paginate:{previous:"<",next:">"},info:"Showing _START_ - _END_ of _TOTAL_ readings"},aoColumns:[{mData:null,defaultContent:"",sTitle:"#",sClass:"head1 text-left",bSortable:!1,mRender:function(n,t,i,r){return r.row+1}},{mData:"CompanyName",sTitle:"Company Name",sClass:"head1 text-left",bSortable:!1},{mData:"CityName",sTitle:"City Name",sClass:"head1 text-left",bSortable:!1},{mData:"ContactPersonName",sTitle:"Contact Person",sClass:"head1 text-left",bSortable:!1},{mData:"ContactEmail",sTitle:"Contact Email",sClass:"head1 text-left",bSortable:!1},{mData:"ContactMobileNo",sTitle:"Mobile No",sClass:"head1 text-left",bSortable:!1},{mData:"IsActive",sTitle:"Status",sClass:"head1 text-center",bSortable:!0,mRender:function(n){return n==!0?"Active":"Inactive"}},{mData:null,defaultContent:"",sTitle:"Edit",sClass:"head1 text-right",bSortable:!1,sWidth:"5px",mRender:function(n,t,i){var u=config.webhostingdomain+admin_clientmanagement.controllerurl+"Add/"+i.ClientID,r='<a  href="'+u+'">';return r+='      <i class="fas fa-edit" aria-hidden="true"><\/i>',r+"   <\/a>"}},{mData:null,defaultContent:"",sTitle:"Change Status",sClass:"head1 text-center",bSortable:!1,sWidth:"10px",mRender:function(n,t,i){var r='<a  href="javascript:void(0)">';return r+='      <i class="fas fa-exchange-alt" aria-hidden="true" onclick="commonFunctions.confirmation(&apos;Are you sure to change status &apos;,admin_clientmanagement.ChangeStatus.bind({ClientID:'+i.ClientID+",Status:"+!i.IsActive+'}))"><\/i>',r+"   <\/a>"}},{mData:null,defaultContent:"",sTitle:"Delete",sClass:"head1 text-center",bSortable:!1,sWidth:"8px",mRender:function(n,t,i){var r='<a  href="javascript:void(0)">';return r+='      <i class="far fa-trash-alt" aria-hidden="true" onclick="commonFunctions.confirmation(&apos;Are you sure to delete this record?&apos;,admin_clientmanagement.Delete.bind({ClientID:'+i.ClientID+'}))"><\/i>',r+"   <\/a>"}},],bUseRendered:!0,sPaginationType:"simple_numbers",aaSorting:[],dom:'<<"float-right"l>f<t><"#df"<"float-left" i><"float-right pagination pagination-sm p-1"p>>>',lengthChange:!0,lengthMenu:[[10,20,30,-1],[10,20,30,"All"]],pageLength:20,initComplete:function(n){$(n.nTHead).addClass("table-head-bgcolor")}})},ChangeStatus:function(n){n==!0&&apiCall.ajaxCall(undefined,"GET",admin_clientmanagement.controllerurl+"ChangeStatus",{ClientID:this.ClientID,IsActive:this.Status}).then(()=>{admin_clientmanagement.List()})},Delete:function(n){n==!0&&apiCall.ajaxCall(undefined,"GET",admin_clientmanagement.controllerurl+"Delete",{ClientID:this.ClientID}).then(()=>{admin_clientmanagement.List()})},addUserAjaxComplete:function(n){let t=n.responseJSON;t.IsSuccess==!0&&t.ReturnMessage=="Client updated"&&bootbox.alert("Record updated successfully.");t.IsSuccess==!0&&t.ReturnMessage=="Client Created"&&(commonFunctions.resetControls("frmAddclient"),bootbox.alert("Record created successfully."))}},admin_rolemanager={ListRoles:function(){clearDatatable("dtRolelist");apiCall.ajaxCallWithReturnData(undefined,"GET","admin/RoleManager/Roles").then(n=>{admin_rolemanager.onSuccess_ListRoles(n.Data)})},onSuccess_ListRoles:function(n){var t=$("#dtRolelist").DataTable({bServerSide:!1,bDestroy:!0,paging:!0,autoWidth:!1,bStateSave:!1,searching:!1,data:n,info:!1,aaSorting:[],language:{paginate:{previous:"<",next:">"},info:"Showing _START_ - _END_ of _TOTAL_ readings"},aoColumns:[{mData:null,defaultContent:"",sTitle:"#",sClass:"head1 text-left",bSortable:!0,mRender:function(n,t,i,r){return r.row+1}},{mData:"Name",sTitle:"Name",sClass:"head1 text-left",bSortable:!0},{mData:"Id",defaultContent:"",sTitle:"",sClass:"head1 text-right",bSortable:!1,mRender:function(n){var i=config.webhostingdomain+"admin/RoleManager/Add/"+n,t='<a  href="'+i+'">';return t+='      <i class="fas fa-edit" aria-hidden="true"><\/i>',t+"   <\/a>"}},],bUseRendered:!0,sPaginationType:"simple_numbers",aaSorting:[],dom:'<<"float-right"l>f<t><"#df"<"float-left" i><"float-right pagination pagination-sm p-1"p>>>',lengthChange:!0,lengthMenu:[[10,20,30,-1],[10,20,30,"All"]],pageLength:20,initComplete:function(n){$(n.nTHead).addClass("table-head-bgcolor")}})},addRoleAjaxComplete:function(){}},admin_usermanagement={init:function(){this.fillcomboRole();this.fillcomboManager()},getSearchCriteria:function(){return{Name:$("#txtSearchname").val(),Email:$("#txtSearchemail").val(),IsActive:$("#chkIsactive").is(":checked")?!0:!1}},fillcomboRole:function(){apiCall.ajaxCallWithReturnData(undefined,"GET","admin/Usermanagement/Roles").then(n=>{let t=n.Data;if(typeof t!=typeof undefined){let n=$("#ddlRole").attr("data-selected-value");$.map(t,function(t){t.id=t.Id;t.text=t.Name;n==t.id&&(t.selected=!0);delete t.Id;delete t.Name});$("#ddlRole").empty();$("#ddlRole").append($("<option style='font-size:14px;'><\/option>").attr("value","").text("Select"));$("#ddlRole").off("select2:select");$("#ddlRole").off("select2:unselect");$("#ddlRole").select2({data:t,containerCss:{"font-size":"12px"},dropdownCss:{"font-size":"12px"}})}})},fillcomboManager:function(){apiCall.ajaxCallWithReturnData({RoleId:3},"GET","admin/Usermanagement/GetUsers").then(n=>{let t=n.Data,i=$("#ddlRepotsTo").attr("data-selected-value");$.map(t,function(n){i==n.id&&(n.selected=!0)});$("#ddlRepotsTo").empty();$("#ddlRepotsTo").append($("<option style='font-size:12px;'><\/option>").attr("value","").text("Select"));$("#ddlRepotsTo").off("select2:select");$("#ddlRepotsTo").off("select2:unselect");$("#ddlRepotsTo").select2({data:t,containerCss:{"font-size":"12px"},dropdownCss:{"font-size":"12px"}})})},ListUsers:function(){commonFunctions.clearDatatable("dtUserlist");let n=admin_usermanagement.getSearchCriteria();apiCall.ajaxCallWithReturnData(n,"POST","admin/UserManagement/ListUsers").then(n=>{admin_usermanagement.onSuccess_ListUsers(n.Data)})},onSuccess_ListUsers:function(n){var t=$("#dtUserlist").DataTable({bServerSide:!1,bDestroy:!0,paging:!0,autoWidth:!1,bStateSave:!1,searching:!1,data:n,info:!1,aaSorting:[],language:{paginate:{previous:"<",next:">"},info:"Showing _START_ - _END_ of _TOTAL_ readings"},aoColumns:[{mData:null,defaultContent:"",sTitle:"#",sClass:"head1 text-left",bSortable:!0,mRender:function(n,t,i,r){return r.row+1}},{mData:"Name",sTitle:"Name",sClass:"head1 text-left",bSortable:!0},{mData:"Email",sTitle:"Email",sClass:"head1 text-left",bSortable:!0},{mData:"Role",sTitle:"Role",sClass:"head1 text-left",bSortable:!0},{mData:"IsActive",sTitle:"Status",sClass:"head1 text-center",bSortable:!0,mRender:function(n){return n==!0?"Active":"Inactive"}},{mData:"Id",defaultContent:"",sTitle:"",sClass:"head1 text-right",bSortable:!1,mRender:function(n){var i=config.webhostingdomain+"admin/Usermanagement/Add/"+n,t='<a  href="'+i+'">';return t+='      <i class="fas fa-edit" aria-hidden="true"><\/i>',t+"   <\/a>"}},],bUseRendered:!0,sPaginationType:"simple_numbers",aaSorting:[],dom:'<<"float-right"l>f<t><"#df"<"float-left" i><"float-right pagination pagination-sm p-1"p>>>',lengthChange:!0,lengthMenu:[[10,20,30,-1],[10,20,30,"All"]],pageLength:20,initComplete:function(n){$(n.nTHead).addClass("table-head-bgcolor")}})},addUserAjaxComplete:function(n){let t=n.responseJSON;console.log(t);switch(n.status){case 200:if(t.Data.StatusCode==2)return $("#spanPassword").text(t.Data.Description),!1;parseInt($("#hdnId").val())<=0&&commonFunctions.resetControls("frmAdduser");bootbox.alert(t.Data.Description)}}},admin_benchmark={setBenchMarkMenuByRole:function(){apiCall.ajaxCallWithReturnData({role:"CORPORATE"},"GET","admin/Benchmark/SetBenchMarkMenuByRole").then(n=>{$("#divListBenchmark").jstree({core:{multiple:!1,data:n.Data,themes:{icons:!1,dots:!0,stripes:!1,variant:!1,responsive:!0}}});$("#divListBenchmark").on("ready.jstree",function(){});$("#divListBenchmark").on("select_node.jstree",function(n,t){let i=t.node.data;apiCall.loadPartial({KPI_TYPE:i.cntrl,kpiname:i.kpiname,kpicd:i.kpicd,operation:i.operation},"GET","admin/Benchmark/GetUserControl").then(n=>{$("#divPVContent").html(n)})})})}},benchmark_bmregular={initialize:function(n,t){apiCall.ajaxCallWithReturnData({kpicid:n,operation:t},"GET","admin/Benchmark/PopulateGrid").then(n=>{let t=n.Data;benchmark_bmregular.loadTale(t)})},loadTale:function(n){var t=$("#dtgrdvRegBm").DataTable({bServerSide:!1,bDestroy:!0,paging:!1,autoWidth:!1,bStateSave:!1,searching:!1,data:n,info:!1,aaSorting:[],language:{paginate:{previous:"<",next:">"},info:"Showing _START_ - _END_ of _TOTAL_ readings"},aoColumns:[{mData:"TimeLines",sTitle:"Time Lines",sClass:"head1 text-left",bSortable:!1},{mData:"LowerValue",sTitle:"Lower Value",sClass:"head1 text-left",bSortable:!1,mRender:function(n,t,i,r){return'<input type="text" value="'+n+'" class="form-control form-control-sm"  onkeyup="benchmark_bmregular.updateTableValue(this,'+r.row+',&apos;LowerValue&apos;)" />'}},{mData:"MidValue",sTitle:"Mid Value",sClass:"head1 text-left",bSortable:!1,mRender:function(n,t,i,r){return'<input type="text" value="'+n+'" class="form-control form-control-sm" onkeyup="benchmark_bmregular.updateTableValue(this,'+r.row+',&apos;MidValue&apos;)" />'}},{mData:"UpperValue",sTitle:"Upper Value",sClass:"head1 text-left",bSortable:!1,mRender:function(n,t,i,r){return'<input type="text" value="'+n+'" class="form-control form-control-sm" onkeyup="benchmark_bmregular.updateTableValue(this,'+r.row+',&apos;UpperValue&apos;)" />'}},],bUseRendered:!0,sPaginationType:"simple_numbers",aaSorting:[],dom:'<<"float-right"l>f<t><"#df"<"float-left" i><"float-right pagination pagination-sm p-1"p>>>',lengthChange:!0,lengthMenu:[[10,20,30,-1],[10,20,30,"All"]],pageLength:20,initComplete:function(n){$(n.nTHead).addClass("table-head-bgcolor")}})},updateTableValue:function(n,t,i){var r=$("#dtgrdvRegBm").dataTable().fnGetData();r[t][i]=parseFloat($(n).val())},fillComboTimeline:function(n){apiCall.ajaxCallWithReturnData({kpicid:n},"GET","admin/Benchmark/Timelines").then(n=>$("#ddlTimelines").select2({data:n.Data,theme:"bootstrap",multiple:!1})).done(n=>{n.on("select2:select",function(n){console.log(n.params.data)})})},saveBenchmark:function(){let n=$("#dtgrdvRegBm").dataTable().fnGetData();console.log(n);apiCall.ajaxCall(undefined,"POST","admin/BenchMark/SaveBenchMark",n)}};